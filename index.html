<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rep Timer</title>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Roboto&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background: #f1f1f1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 40px;
    }

    h1 {
      font-family: 'Bebas Neue', sans-serif;
      letter-spacing: 2px;
      font-size: 58px;
      color: #2c3e50;
    }

    label {
      display: block;
      margin: 10px 0;
      font-size: 18px;
    }

    input {
      padding: 8px;
      font-size: 16px;
      width: 60px;
      margin-left: 10px;
    }

    .buttons {
      margin: 20px 0;
    }

    .buttons button {
      padding: 10px 20px;
      font-size: 18px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin: 0 8px;
      color: white;
    }

    .start-btn { background-color: #27ae60; }
    .pause-btn { background-color: #e67e22; }
    .reset-btn { background-color: #c0392b; }

    .start-btn:hover { background-color: #219150; }
    .pause-btn:hover { background-color: #cf711a; }
    .reset-btn:hover { background-color: #a8322b; }

    #status {
      margin-top: 20px;
      font-size: 24px;
      font-weight: bold;
      color: #333;
    }

    .progress-container {
      width: 80%;
      height: 24px;
      background: #ccc;
      border-radius: 12px;
      overflow: hidden;
      margin-top: 20px;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: green;
      transition: width 0.5s, background-color 0.5s;
    }

    #message {
      margin-top: 20px;
      font-size: 20px;
      font-weight: 500;
      text-align: center;
    }

    #motivationGif {
      margin-top: 10px;
      max-width: 300px;
      border-radius: 12px;
    }

    #confetti-container {
      position: fixed;
      pointer-events: none;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 999;
    }

    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background-color: red;
      opacity: 0.8;
      animation: fall linear infinite;
      transform: rotate(0deg);
    }

    @keyframes fall {
      0% {
        transform: translateY(-10%) rotate(0deg);
      }
      100% {
        transform: translateY(110vh) rotate(360deg);
      }
    }
    .input-group {
      display: flex;
      align-items: center;
      margin: 8px 0;
    }

    .input-group label {
      width: 150px;
      text-align: right;
      margin-right: 10px;
      font-size: 18px;
    }
    @media only screen and (max-height: 500px) and (orientation: landscape) {
      h1 {
        font-size: 6vw;
      }

      input {
        font-size: 4vw;
        width: 20vw;
      }

      .buttons button {
        font-size: 4vw;
        padding: 2vw 4vw;
      }

      #status {
        font-size: 4vw;
      }

      #message {
        font-size: 4vw;
      }

      #motivationGif {
        max-width: 50vw;
      }
    }
  </style>
</head>
<body>
  <h1>Rep Timer</h1>
    <div class="input-group">
      <label for="time">Time (minutes):</label>
      <input type="number" id="time" value="1" min="1" />
    </div>

    <div class="input-group">
      <label for="reps">Reps:</label>
      <input type="number" id="reps" value="10" min="1" />
    </div>
  <!-- <label>Time (minutes): -->
  <!--   <input type="number" id="time" value="1" min="1" /> -->
  <!-- </label> -->

  <!-- <label>Reps: -->
  <!--   <input type="number" id="reps" value="10" min="1" /> -->
  <!-- </label> -->

  <div class="buttons">
    <button class="start-btn" onclick="startTimer()">Start</button>
    <button class="pause-btn" onclick="pauseTimer()">Pause</button>
    <button class="reset-btn" onclick="resetTimer()">Reset</button>
  </div>

  <p id="status"></p>

  <div class="progress-container">
    <div id="progressBar" class="progress-bar"></div>
  </div>

  <div id="message"></div>
  <img id="motivationGif" src="" alt="motivation" />

  <!-- Sounds -->
  <audio id="clapSound" src="timersounds/clapping.mp3" preload="auto"></audio>

  <script>
    let timer = null;
    let interval = 0;
    let reps = 0;
    let currentRep = 0;
    let paused = false;
    let prepCountdown = 5;
    let prepTimer = null;

    const earlyMessages = [
      "You got this! üí™",
      "Just getting warmed up!",
      "Looking sharp!",
      "Keep going, you're looking great!",
      "Push through! üöÄ"
    ];

    const lateMessages = [
      "Almost there! üî•",
      "Finish strong! üíØ",
      "Your future self is cheering!",
      "Just one more rep!",
      "You beast! üêÖ"
    ];


    const readyGif = "timergifs/ready.gif";

    const runningGif = "timergifs/running.gif";

    const clappingGif = "timergifs/clapping.gif";

    function beep() {
      const ctx = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = ctx.createOscillator();
      oscillator.type = "sine";
      oscillator.frequency.setValueAtTime(1000, ctx.currentTime);
      oscillator.connect(ctx.destination);
      oscillator.start();
      oscillator.stop(ctx.currentTime + 0.2);
    }

    function showMotivation() {
      
      const msgPool = currentRep > reps / 2 ? lateMessages : earlyMessages;
      const msg = msgPool[Math.floor(Math.random() * msgPool.length)];

      document.getElementById("message").textContent = msg;
    }

    function updateProgress() {
      const percent = (currentRep / reps) * 100;
      const bar = document.getElementById("progressBar");
      bar.style.width = `${percent}%`;

      if (percent < 33) bar.style.backgroundColor = "green";
      else if (percent < 66) bar.style.backgroundColor = "orange";
      else bar.style.backgroundColor = "red";
    }

    function startTimer() {
      if (timer || prepTimer) return;

      const time = parseFloat(document.getElementById("time").value);
      reps = parseInt(document.getElementById("reps").value);
      if (time <= 0 || reps <= 0) {
        alert("Enter positive values.");
        return;
      }

      interval = (time * 60) / reps;
      currentRep = 0;
      paused = false;
      prepCountdown = 5;
      updateProgress();

      document.getElementById("status").textContent = `‚è≥ Starting in 5...`;

      prepTimer = setInterval(() => {
        if (paused) return;
        if (prepCountdown <= 1) {
          clearInterval(prepTimer);
          prepTimer = null;
          beep(); // signal start
            document.getElementById("status").textContent = `üí™ Let's go! Rep ${currentRep+1}!`;
          document.getElementById("motivationGif").src = runningGif;
          startReps();
        } else {
          prepCountdown--;
          document.getElementById("status").textContent = `‚è≥ Starting in ${prepCountdown}...`;
        }
      }, 1000);
    }

    function startReps() {
      timer = setInterval(() => {
        if (paused) return;
        currentRep++;
            if (currentRep >= reps) {
          clearInterval(timer);
          timer = null;
          document.getElementById("status").textContent = "üéâ Workout Complete!";
          document.getElementById("clapSound").play();
          document.getElementById("motivationGif").src = clappingGif;
          beep();
          updateProgress();
          setTimeout(() => {
            launchConfetti();
          }, 1000);
        } else {
          beep();
          showMotivation();
          document.getElementById("status").textContent = `‚è±Ô∏è Rep ${currentRep+1} of ${reps}`;
          updateProgress();
        }
      }, interval * 1000);
    }

    function pauseTimer() {
      paused = !paused;
      document.getElementById("status").textContent = paused
        ? "‚è∏Ô∏è Paused"
        : prepTimer
        ? `‚è≥ Resuming countdown: ${prepCountdown}`
        : `‚ñ∂Ô∏è Resuming rep ${currentRep+1} of ${reps}`;
    }

    function resetTimer() {
      clearInterval(timer);
      clearInterval(prepTimer);
      timer = null;
      prepTimer = null;
      paused = false;
      currentRep = 0;
      prepCountdown = 5;
      updateProgress();
      document.getElementById("status").textContent = "üîÅ Ready.";
      document.getElementById("message").textContent = "";
      document.getElementById("motivationGif").src = readyGif;
    }

    resetTimer();
    function launchConfetti() {
      const container = document.getElementById("confetti-container");
      container.innerHTML = ""; // clear if rerunning

      const colors = ["#f39c12", "#e74c3c", "#9b59b6", "#1abc9c", "#3498db"];
      for (let i = 0; i < 100; i++) {
        const confetti = document.createElement("div");
        confetti.className = "confetti";
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.left = Math.random() * 100 + "vw";
        confetti.style.animationDuration = (2 + Math.random() * 3) + "s";
        confetti.style.animationDelay = Math.random() + "s";
        container.appendChild(confetti);
      }

      // Remove after 5 seconds
      setTimeout(() => {
        container.innerHTML = "";
      }, 5000);
    }
  </script>
    <div id="confetti-container"></div>
</body>
